import{p as H,v as W,s as p,c as f,d as X,w,o as j,b as q,g as A,r as G,y as I,u as J,z as K,D as R,F as d,G as C,M as O,e as Q,k as Z,n as ee,a1 as te,a2 as ae,a3 as oe,a4 as le,a5 as ne,a6 as se,J as re,K as ue,L as ie,a7 as ce,Q as de,a8 as ve,E as L,a9 as me,aa as ge,ab as fe,ac as he,W as be,ad as ye,ae as Se,X as F,af as B,Z as _,_ as h,Y as U,ag as P,ah as N,I as Y,a0 as _e,ai as $,aj as pe,$ as x,ak as Ve,al as ke}from"./index-D5AbFdb1.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as z,m as Te,a as we,b as Ce}from"./VToolbar-Dwaicu2W.js";import{u as Ie}from"./ssrBoot-B8DZFry5.js";import{V as D}from"./VContainer-BkXp5onC.js";import{V as Pe}from"./VMain-fgaRP5E3.js";const Ne=H({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function xe(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:i}=o;let v=0,u=0;const t=W(null),r=p(0),n=p(0),m=p(0),b=p(!1),a=p(!1),g=f(()=>Number(e.scrollThreshold)),V=f(()=>X((g.value-r.value)/g.value||0)),y=()=>{const s=t.value;if(!s||i&&!i.value)return;v=r.value,r.value="window"in s?s.pageYOffset:s.scrollTop;const c=s instanceof Window?document.documentElement.scrollHeight:s.scrollHeight;if(u!==c){u=c;return}a.value=r.value<v,m.value=Math.abs(r.value-g.value)};return w(a,()=>{n.value=n.value||r.value}),w(b,()=>{n.value=0}),j(()=>{w(()=>e.scrollTarget,s=>{var S;const c=s?document.querySelector(s):window;c&&c!==t.value&&((S=t.value)==null||S.removeEventListener("scroll",y),t.value=c,t.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),q(()=>{var s;(s=t.value)==null||s.removeEventListener("scroll",y)}),i&&w(i,y,{immediate:!0}),{scrollThreshold:g,currentScroll:r,currentThreshold:m,isScrollActive:b,scrollRatio:V,isScrollingUp:a,savedScroll:n}}const Le=H({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Te(),...O(),...Ne(),height:{type:[Number,String],default:64}},"VAppBar"),He=A()({name:"VAppBar",props:Le(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:i}=o;const v=W(),u=G(e,"modelValue"),t=f(()=>{var k;const l=new Set(((k=e.scrollBehavior)==null?void 0:k.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),r=f(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!u.value}),{currentScroll:n,scrollThreshold:m,isScrollingUp:b,scrollRatio:a}=xe(e,{canScroll:r}),g=I(()=>t.value.hide||t.value.fullyHide),V=f(()=>e.collapse||t.value.collapse&&(t.value.inverted?a.value>0:a.value===0)),y=f(()=>e.flat||t.value.fullyHide&&!u.value||t.value.elevate&&(t.value.inverted?n.value>0:n.value===0)),s=f(()=>t.value.fadeImage?t.value.inverted?1-a.value:a.value:void 0),c=f(()=>{var E,M;if(t.value.hide&&t.value.inverted)return 0;const l=((E=v.value)==null?void 0:E.contentHeight)??0,k=((M=v.value)==null?void 0:M.extensionHeight)??0;return g.value?n.value<m.value||t.value.fullyHide?l+k:l:l+k});J(()=>!!e.scrollBehavior,()=>{Q(()=>{g.value?t.value.inverted?u.value=n.value>m.value:u.value=b.value||n.value<m.value:u.value=!0})});const{ssrBootStyles:S}=Ie(),{layoutItemStyles:T}=K({id:e.name,order:f(()=>parseInt(e.order,10)),position:I(()=>e.location),layoutSize:c,elementSize:p(void 0),active:u,absolute:I(()=>e.absolute)});return R(()=>{const l=z.filterProps(e);return d(z,C({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...T.value,"--v-toolbar-image-opacity":s.value,height:void 0,...S.value},e.style]},l,{collapse:V.value,flat:y.value}),i)}),{}}}),Ae=A()({name:"VAppBarTitle",props:we(),setup(e,o){let{slots:i}=o;return R(()=>d(Ce,C(e,{class:"v-app-bar-title"}),i)),{}}}),Re=H({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ve,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...de(),...ce({location:"top end"}),...ie(),...ue(),...re(),...se({transition:"scale-rotate-transition"})},"VBadge"),Ee=A()({name:"VBadge",inheritAttrs:!1,props:Re(),setup(e,o){const{backgroundColorClasses:i,backgroundColorStyles:v}=Z(()=>e.color),{roundedClasses:u}=ee(e),{t}=te(),{textColorClasses:r,textColorStyles:n}=ae(()=>e.textColor),{themeClasses:m}=oe(),{locationStyles:b}=le(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?Number(e.offsetY??0):["left","right"].includes(a)?Number(e.offsetX??0):0));return R(()=>{const a=Number(e.content),g=!e.max||isNaN(a)?e.content:a<=Number(e.max)?a:`${e.max}+`,[V,y]=ne(o.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return d(e.tag,C({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},y,{style:e.style}),{default:()=>{var s,c;return[L("div",{class:"v-badge__wrapper"},[(c=(s=o.slots).default)==null?void 0:c.call(s),d(me,{transition:e.transition},{default:()=>{var S,T;return[ge(L("span",C({class:["v-badge__badge",m.value,i.value,u.value,r.value],style:[v.value,n.value,e.inline?{}:b.value],"aria-atomic":"true","aria-label":t(e.label,a),"aria-live":"polite",role:"status"},V),[e.dot?void 0:o.slots.badge?(T=(S=o.slots).badge)==null?void 0:T.call(S):e.icon?d(he,{icon:e.icon},null):g]),[[fe,e.modelValue]])]}})])]}})}),{}}}),Me={class:"home-bg"},Fe={__name:"default",setup(e){const o=be(),i=ye(),v=Se(),u=f(()=>[{title:"首頁",to:"/",icon:"mdi-home",show:!0},{title:"註冊",to:"/register",icon:"mdi-account-plus",show:!o.isLoggedIn},{title:"登入",to:"/login",icon:"mdi-login",show:!o.isLoggedIn},{title:"購物車",to:"/cart",icon:"mdi-cart",show:o.isLoggedIn},{title:"訂單",to:"/orders",icon:"mdi-invoice-list-outline",show:o.isLoggedIn},{title:"管理",to:"/admin",icon:"mdi-cog",show:o.isLoggedIn&&o.isAdmin}]),t=async()=>{try{await ke.logout()}catch(r){console.error(r)}o.logout(),v.push("/"),i({text:"登出成功！",snackbarProps:{color:"green"}})};return(r,n)=>{const m=F("router-link"),b=F("router-view");return _(),B(Ve,null,{default:h(()=>[L("div",Me,[d(He,null,{default:h(()=>[d(D,{class:"d-flex align-center"},{default:h(()=>[d(Ae,null,{default:h(()=>[d(m,{style:{"text-decoration":"none",color:"white"},to:"/"},{default:h(()=>n[0]||(n[0]=[N("購物網站")])),_:1,__:[0]})]),_:1}),(_(!0),U(Y,null,_e(u.value,a=>(_(),U(Y,{key:a.to},[a.show?(_(),B($,{key:0,"prepend-icon":a.icon,to:a.to},{default:h(()=>[N(pe(a.title)+" ",1),a.to==="/cart"&&x(o).cartTotal>0?(_(),B(Ee,{key:0,color:"red",content:x(o).cartTotal,floating:""},null,8,["content"])):P("",!0)]),_:2},1032,["prepend-icon","to"])):P("",!0)],64))),128)),x(o).isLoggedIn?(_(),B($,{key:0,"prepend-icon":"mdi-logout",onClick:t},{default:h(()=>n[1]||(n[1]=[N("登出")])),_:1,__:[1]})):P("",!0)]),_:1})]),_:1}),d(Pe,null,{default:h(()=>[d(D,null,{default:h(()=>[(_(),B(b,{key:r.$route.fullPath}))]),_:1})]),_:1})])]),_:1})}}},Xe=Be(Fe,[["__scopeId","data-v-a168d695"]]);export{Xe as default};
