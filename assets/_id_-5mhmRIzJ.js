import{ad as b,W as k,v as p,Y as x,F as a,_ as o,bC as h,I as C,bT as w,ae as P,Z as S,E as s,aj as l,V as B,ai as m,ah as v,al as E}from"./index-D5AbFdb1.js";import{p as I}from"./product-DBt-vjjm.js";import{V as N,a as n,b as f}from"./route-block-DhdQpsR2.js";import{V as T}from"./VContainer-BkXp5onC.js";import{V as g}from"./VDivider-DMlEPX4j.js";import{V as R}from"./VNumberInput-Cw9abIPz.js";const j={class:"text-center"},q={style:{"white-space":"pre"}},D={__name:"[id]",setup(F){const c=b(),i=P(),d=w(),V=k(),t=p({name:"",price:0,description:"",category:"",sell:!0,image:""});(async()=>{try{const{data:e}=await I.getId(d.params.id);t.value.name=e.product.name,t.value.price=e.product.price,t.value.description=e.product.description,t.value.category=e.product.category,t.value.sell=e.product.sell,t.value.image=e.product.image,document.title=`${e.product.name} | 購物網站`}catch(e){console.error("Error fetching products:",e),c({text:"無法載入商品資料",snackbarProps:{color:"red"}}),i.push("/")}})();const u=p(1),y=async()=>{try{const{data:e}=await E.cart({product:d.params.id,quantity:u.value});V.cartTotal=e.result,c({text:"已加入購物車",snackbarProps:{color:"green"}})}catch(e){console.error("Error fetching products:",e),c({text:"無法加入購物車",snackbarProps:{color:"red"}}),i.push("/")}};return(e,r)=>(S(),x(C,null,[a(T,null,{default:o(()=>[a(N,null,{default:o(()=>[a(n,{cols:"12"},{default:o(()=>[s("h1",j,l(t.value.name),1)]),_:1}),a(g),a(n,null,{default:o(()=>[a(B,{class:"mb-4",contain:"",height:"400",src:t.value.image},null,8,["src"])]),_:1}),a(n,{cols:"12",md:"6"},{default:o(()=>[s("p",null,"分類："+l(t.value.category),1),s("p",null,"價格："+l(t.value.price),1),a(g,{class:"my-5"}),s("p",q,"描述："+l(t.value.description),1),a(R,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=_=>u.value=_),"control-variant":"split",min:1,variant:"filled"},null,8,["modelValue"]),a(m,{class:"mt-4",color:"primary",disabled:!t.value.sell,onClick:y},{default:o(()=>r[1]||(r[1]=[v(" 加入購物車 ")])),_:1,__:[1]},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(h,{class:"align-center justify-center text-center","model-value":!t.value.sell,opacity:"0.5",persistent:"",scrim:"black"},{default:o(()=>[r[3]||(r[3]=s("h1",null,"已下架",-1)),r[4]||(r[4]=s("p",{class:"mt-3"},"這個商品已下架，無法購買",-1)),a(m,{class:"mt-4",color:"success",to:"/"},{default:o(()=>r[2]||(r[2]=[v(" 返回首頁 ")])),_:1,__:[2]})]),_:1,__:[3,4]},8,["model-value"])],64))}};typeof f=="function"&&f(D);export{D as default};
