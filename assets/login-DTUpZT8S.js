import{ad as x,W as w,al as S,ae as k,af as y,_ as t,Z as F,F as s,E as q,aN as B,$ as a,av as d,ai as N,ah as h}from"./index-D5AbFdb1.js";import{u as C,c as M,b as m,e as p,V as U}from"./index.esm-CeQUswTO.js";import{V as $,a as f,b as g}from"./route-block-DhdQpsR2.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as R}from"./VContainer-BkXp5onC.js";import{V as T}from"./VDivider-DMlEPX4j.js";const V={__name:"login",setup(j){const c=x(),b=k(),v=w(),u=C({validationSchema:M({account:m().required("帳號或電子郵件必填"),password:m().required("密碼是必填的").min(4,"密碼至少需要 4 個字元").max(20,"密碼最多只能有 20 個字元")})}),n=p("account"),i=p("password"),_=u.handleSubmit(async l=>{var e,o;console.log(l);try{const{data:r}=await S.login({account:l.account,password:l.password});v.login(r.user),c({text:"登入成功！",snackbarProps:{color:"green"}}),b.push("/")}catch(r){console.error(r),c({text:((o=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:o.message)||"登入失敗，請稍後再試！",snackbarProps:{color:"red"}})}});return(l,e)=>(F(),y(R,null,{default:t(()=>[s($,{class:"justify-center glass"},{default:t(()=>[s(f,{cols:"5"},{default:t(()=>e[2]||(e[2]=[q("h1",{class:"text-center"},"登入",-1)])),_:1,__:[2]}),s(T),s(f,{cols:"5"},{default:t(()=>[s(U,{disabled:a(u).isSubmitting.value,onSubmit:B(a(_),["prevent"])},{default:t(()=>[s(d,{modelValue:a(n).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(n).value.value=o),"error-messages":a(n).errorMessage.value,label:"帳號或信箱",required:""},null,8,["modelValue","error-messages"]),s(d,{modelValue:a(i).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(i).value.value=o),counter:"","error-messages":a(i).errorMessage.value,label:"密碼",maxlength:"20",minlength:"4",required:"",type:"password"},null,8,["modelValue","error-messages"]),s(N,{block:"",color:"success",loading:a(u).isSubmitting.value,type:"submit"},{default:t(()=>e[3]||(e[3]=[h("登入")])),_:1,__:[3]},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof g=="function"&&g(V);const A=P(V,[["__scopeId","data-v-87c6b780"]]);export{A as default};
